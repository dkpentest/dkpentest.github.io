<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="theme-color" content="#1b1b1b">
	<title>CDN_bypass | drunk for pentest</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<link rel="stylesheet" href="/css/bundle.css">
	<link rel="icon" href="/icons/16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="/icons/32.png" sizes="32x32" type="image/png">
		
</head>
<body class="body kind-page">
	<header class="header">
	<a class="logo" href="/">drunk for pentest</a>
	
</header>
	<div class="primary">
	
	<main class="main">
		
		<div class="single block">
			<article class="entry">
				<h1 class="entry__title">CDN_bypass</h1>
				<div class="entry__content"><h3 id="web-hacking第一课">WEB hacking第一课</h3>
<p>真实网络的攻防不同于虚拟环境CTF，由于绝大多数网站都开启了CDN加速导致真实IP被隐藏，如果想直接绕过web服务层对底层进行漏洞利用，需要首先绕过CDN找到真实服务器IP。</p>
<p>根据Alexa（权威网站访问量排名机构）前1000个网站中，50%开启CDN，前10000中35%开启CDN。
基本原理为：存储中心（通过高速内容分发网络）CDN下载节点（GSLB全局负载均衡系统）终端客户访问</p>
<hr>
<h3 id="0x0-判断网站是否使用cdn">0x0 判断网站是否使用CDN</h3>
<ul>
<li>反差域名IP，是否有大量不相关域名存在</li>
<li>观察返回包头，是否有CDN服务商标识</li>
<li>用超级ping，不同定位点的ping返回IP是否不同</li>
<li>IP是否在常见CDN服务商服务器IP上</li>
<li>asp.net的网站返回头的server不是IIS而是Nginx，很可能nginx反向代理到了CDN</li>
<li>nslookup查询域名，是否有多个IP应答</li>
</ul>
<hr>
<h3 id="0x1-绕过cdn溯源真实ip">0x1 绕过CDN溯源真实IP</h3>
<p>DNS解析是按：<br>
浏览器缓存表、本地host表、路由器表、运营商表、DNS根服务商表一级一级往上递归查询的</p>
<h5 id="1网站只做了主域名cdn没有做子域名cdn">1、网站只做了主域名CDN，没有做子域名CDN</h5>
<p>对比几个同样是三级子域名的IP是否相同</p>
<h5 id="2在线dns反查平台">2、在线DNS反查平台</h5>
<pre tabindex="0"><code>https://securitytrails.com/ (很好用的DNS记录、各种记录数据查询引擎)
https://viewdns.info/ （非常简洁直观）

https://completedns.com/
https://whoisrequest.com/
https://www.whoxy.com/
https://x.threatbook.cn/
https://netcraft.com/
https://reverse-ip.whoisxmlapi.com/
https://dnsdb.io/
https://ruo.me/sub
</code></pre><h5 id="3物联网络空间测绘搜索引擎">3、物联网络空间测绘搜索引擎</h5>
<pre tabindex="0"><code>Censys（https://censys.io/）
FOFA（https://fofa.so/）
Shodan（https://www.shodan.io/）
Zoomeye
</code></pre><h5 id="4工具脚本">4、工具脚本</h5>
<pre tabindex="0"><code>SubDomainsBrute:纯粹DNS爆破寻找子域名
项目地址：https://github.com/lijiejie/subDomainsBrute
使用方法：
python subDomainsBrute.py -t www.xxx.com

ESD
项目地址：https://github.com/FeeiCN/ESD
pip install esd
esd -d xxx.com

Layer 子域名挖掘机(windows GUI)
项目地址：https://hub.fastgit.org/euphrat1ca/LayerDomainFinder/releases/tag/3

Xray
项目地址：https://github.com/chaitin/xray

Bypass-firewalls-by-DNS-history
项目地址：https://github.com/vincentcox/bypass-firewalls-by-DNS-history
</code></pre><!-- raw HTML omitted --></div>
				
			</article>
		</div>
	</main>
	
	



	

	</div>
	<footer class="footer">
	<div class="footer__copyright">© 2023 drunk for pentest. <span class="footer__copyright-credits">Powered by <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/vimux/binario" rel="nofollow noopener" target="_blank">Binario</a> theme.</span></div>
</footer>
</body>
</html>